(this["webpackJsonpweb-client"]=this["webpackJsonpweb-client"]||[]).push([[0],{31:function(e,t,n){e.exports=n(44)},36:function(e,t,n){},37:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),u=n.n(o),s=(n(36),n(4)),c=(n(37),n(18)),i=n(1),l=n.n(i),d=n(3),p=n(11),h=n(12),m=n(13),f=n(17),b=n(16),O=n(9),k=window.location.origin+"/graphql";function v(e){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(l.a.mark((function e(t){var n,a,r,o,u=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},console.log(n),e.next=4,fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:n})});case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,o=r.data,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w="\n    query {\n        authors {\n            id\n            name\n            noOfBooksPublished\n        }\n    }\n",j="\n    mutation addAuthor($name:String!, $noOfBooksPublished: Int!) {\n        addAuthor(name:$name,noOfBooksPublished:$noOfBooksPublished) {\n            name\n            id\n            noOfBooksPublished\n        }\n    }\n",I="\n    mutation deleteAuthor($id: Int!){\n        deleteAuthor(id:$id) {\n            result\n        }\n    }  \n",B="\n    mutation updateAuthor($id: Int!, $name: String, $noOfBooksPublished: Int) {\n        updateAuthor(id:$id, name:$name, noOfBooksPublished:$noOfBooksPublished){\n            id\n            name\n            noOfBooksPublished\n        }\n    }\n";function x(){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(w);case 2:return t=e.sent,e.abrupt("return",t.authors);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(j,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(I,{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return $.apply(this,arguments)}function $(){return($=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(B,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){return{type:"SET_AUTHORS",data:{authors:e}}},P=function(e){return{type:"ADD_AUTHOR",data:{author:e}}},H=function(e){return{type:"EDIT_AUTHOR",data:{author:e}}},q=n(22),R=n.n(q);function U(e){var t=e.id,n=e.name,a=e.noOfBooksPublished,o=e.editHandler,u=e.deleteHandler;return r.a.createElement("div",{className:"list-item"},r.a.createElement("span",null,t),r.a.createElement("span",null,n),r.a.createElement("span",null,a),r.a.createElement("span",{className:"button-container"},r.a.createElement("button",{onClick:function(){return o({id:t,name:n,noOfBooksPublished:a})}},"Edit"),r.a.createElement("button",{onClick:function(){return u(t)}},"Delete")))}var K=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:a.state.name,noOfBooksPublished:parseInt(a.state.noOfBooksPublished)},e.next=4,C(n);case 4:r=e.sent,console.log(r),a.props.dispatch(P(r.addAuthor)),a.setState({name:"",noOfBooksPublished:0});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleEdit=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.fire({title:"Edit Author",showCancelButton:!0,width:600,padding:"3em",background:"#fff url(https://sweetalert2.github.io//images/trees.png)",backdrop:'\n                rgba(0,0,123,0.4)\n                url("https://sweetalert2.github.io//images/nyan-cat.gif")\n                left top\n                no-repeat\n            ',html:'\n                <input type="text" id="author-name" class="modal-input" placeholder="Author Name" value="'.concat(t.name,'"/>\n                <input type="number" id="author-no-of-books-published" class="modal-input" placeholder="No of books published" value="').concat(t.noOfBooksPublished,'"/>\n            '),focusConfirm:!1,allowOutsideClick:!1,preConfirm:function(){return{name:document.getElementById("author-name").value,noOfBooksPublished:parseInt(document.getElementById("author-no-of-books-published").value)}}});case 2:return n=e.sent,r=n.value,o=r?Object(c.a)(Object(c.a)({},r),{},{id:t.id}):t,e.next=7,A(o);case 7:a.props.dispatch(H(o));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleDelete=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:a.props.dispatch({type:"DELETE_AUTHOR",data:{authorId:t}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={name:"",noOfBooksPublished:""},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props.authors.map((function(t){return r.a.createElement(U,Object.assign({key:t.id},t,{editHandler:e.handleEdit,deleteHandler:e.handleDelete}))}));return r.a.createElement("section",{className:"authors"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",required:!0,name:"name",placeholder:"Author name",onChange:this.handleChange,value:this.state.name}),r.a.createElement("input",{type:"number",required:!0,name:"noOfBooksPublished",placeholder:"Books published",onChange:this.handleChange,value:this.state.noOfBooksPublished}),r.a.createElement("input",{type:"submit"})),r.a.createElement("div",{className:"author-list"},t))}}]),n}(a.Component),L=Object(O.b)((function(e){return{authors:e.authors}}))(K),J=function(e){return{type:"SET_BOOKS",data:{books:e}}},X=function(e){return{type:"ADD_BOOK",data:{book:e}}},M=function(e){return{type:"EDIT_BOOK",data:{book:e}}},V="\n    query {\n        books {\n            id\n            name\n            authorId\n            author {\n                name\n                id\n            }\n        }\n    }\n",W="\n    mutation addBook($name:String!, $authorId: Int!) {\n        addBook(name:$name,authorId:$authorId) {\n            name\n            id\n            authorId\n            author {\n                id\n                name\n            }\n        }\n    }\n",z="\n    mutation deleteBook($id: Int!){\n        deleteBook(id:$id) {\n            result\n        }\n    }  \n",F="\n    mutation updateBook($id: Int!, $name: String, $authorId: Int) {\n        updateBook(id:$id, name:$name, authorId:$authorId){\n            id\n            name\n            authorId\n            author {\n                id\n                name\n            }\n        }\n    }\n";function G(){return Q.apply(this,arguments)}function Q(){return(Q=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(V);case 2:return t=e.sent,e.abrupt("return",t.books);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(W,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(z,{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(F,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){var t=e.id,n=e.name,a=e.authorId,o=e.editHandler,u=e.deleteHandler,s=e.author;return r.a.createElement("div",{className:"list-item"},r.a.createElement("span",null,t),r.a.createElement("span",null,n),r.a.createElement("span",null,s.name),r.a.createElement("span",{className:"button-container"},r.a.createElement("button",{onClick:function(){return o({id:t,name:n,authorId:a})}},"Edit"),r.a.createElement("button",{onClick:function(){return u(t)}},"Delete")))}var oe=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).handleChange=function(e){console.log(e.target.name,e.target.value),a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:a.state.name,authorId:parseInt(a.state.authorId)},e.next=4,Y(n);case 4:r=e.sent,console.log(r),a.props.dispatch(X(r.addBook)),a.setState({name:"",authorId:""});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleEdit=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,o,u,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.authors.map((function(e){return'<option key="'.concat(e.id,'" value="').concat(e.id,'">').concat(e.name,"</option>")})),e.next=3,R.a.fire({title:"Edit Author",showCancelButton:!0,width:600,padding:"3em",background:"#fff url(https://sweetalert2.github.io//images/trees.png)",backdrop:'\n                rgba(0,0,123,0.4)\n                url("https://sweetalert2.github.io//images/nyan-cat.gif")\n                left top\n                no-repeat\n            ',html:'\n                <input type="text" id="book-name" class="modal-input" required placeholder="Author Name" value="'.concat(t.name,'"/>\n                <select id="book-authorId" class="modal-input" required value=').concat(t.authorId,">\n                    ").concat(n,"\n                </select>\n            "),focusConfirm:!1,allowOutsideClick:!1,preConfirm:function(){return{name:document.getElementById("book-name").value,authorId:parseInt(document.getElementById("book-authorId").value)}}});case 3:return r=e.sent,o=r.value,u={},u=o?Object(c.a)(Object(c.a)({},o),{},{id:t.id}):t,e.next=9,ne(u);case 9:s=e.sent,console.log(s),a.props.dispatch(M(s.updateBook));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleDelete=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:a.props.dispatch({type:"DELETE_BOOK",data:{bookId:t}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={name:"",authorId:0},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.props.books.map((function(t){return r.a.createElement(re,Object.assign({key:t.id},t,{editHandler:e.handleEdit,deleteHandler:e.handleDelete}))})),n=this.props.authors.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}));return r.a.createElement("section",{className:"books"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",required:!0,name:"name",placeholder:"Book name",onChange:this.handleChange,value:this.state.name}),r.a.createElement("select",{name:"authorId",required:!0,onChange:this.handleChange,value:this.state.authorId},n),r.a.createElement("input",{type:"submit"})),r.a.createElement("div",{className:"book-list"},t))}}]),n}(a.Component),ue=Object(O.b)((function(e){return{books:e.books,authors:e.authors}}))(oe),se=n(15),ce=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return t=e.sent,this.props.dispatch(N(t)),e.next=6,G();case 6:n=e.sent,this.props.dispatch(J(n));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"tabs"},r.a.createElement(se.b,{activeClassName:"tab-active",className:"tab",to:"/books"},"Books"),r.a.createElement(se.b,{activeClassName:"tab-active",className:"tab",to:"/authors"},"Authors"))}}]),n}(r.a.Component),ie=Object(O.b)((function(e){return{books:e.books,authors:e.authors}}))(ce);var le=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ie,null),r.a.createElement("main",null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,render:function(){return r.a.createElement(s.a,{to:"/books"})}}),r.a.createElement(s.b,{path:"/books",component:ue}),r.a.createElement(s.b,{path:"/authors",component:L}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=n(14),pe=n(23),he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"SET_AUTHORS":return e=t.data.authors;case"ADD_AUTHOR":return e=[].concat(Object(pe.a)(e),[t.data.author]);case"EDIT_AUTHOR":return e=e.map((function(e){return e.id===t.data.author.id?t.data.author:e}));case"DELETE_AUTHOR":return e=e.filter((function(e){return e.id!==t.data.authorId}));default:return e}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOOKS":return e=t.data.books;case"ADD_BOOK":return e=[].concat(Object(pe.a)(e),[t.data.book]);case"EDIT_BOOK":return e=e.map((function(e){return e.id===t.data.book.id?t.data.book:e}));case"DELETE_BOOK":return e=e.filter((function(e){return e.id!==t.data.bookId}));default:return e}},fe=Object(de.b)({authors:he,books:me}),be=Object(de.c)(fe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O.a,{store:be},r.a.createElement(se.a,null,r.a.createElement(le,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.51dabf58.chunk.js.map